<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>EJ editor</title>
	<link rel="stylesheet" href="css/tether.min.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="tether.min.js"></script>
	<script src="tinycolor-min.js"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
	<script src="config.js"></script>
	<script src="spred.js"></script>
	<link rel="stylesheet" href="spred.css">
</head>
<body>
<nav class="navbar flex-shrink-0 navbar-expand-lg navbar-light bg-info">
	<span class="navbar-brand">Endless Journey Editor</span>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse" id="navbar">
		<ul class="nav navbar-nav mr-auto" role="tablist">
			<li class="nav-item ml-2">
				<span class="navbar-text">global:</span>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="#tab-spred" data-toggle="tab">Sprites</a>
			</li>
			<li class="nav-item ml-4">
				<span class="navbar-text">mod:</span>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="#tab-monsters" data-toggle="tab">Monsters</a>
			</li>
		</ul>
	</div>
</nav>
<main class="container-fluid vstretch">
	<div class="row flex-shrink-none" id="Loading" style="flex-shrink:0;display:none">
		<div class="col-12 card card-warning">
			<div class="card-block">
				<h5 class="card-header">Filesystem inaccessible</h5>

				<div id="LoadingList"></div>
				<h6>
					<span class="text-muted small">(Tip: you can upload multiple files at once)</span>
				</h6>
			</div>
		</div>
	</div>
	<div id="main" class="tab-content vstretch pt-2">
		<div id="tab-spred" class="tab-pane vstretch">
			<div class="row">
				<div class="col-12">
					<h3>Sprite Editor</h3>
					<button type="button" class="btn btn-secondary" onclick="spred.addCompositeView(spred.defaultPartList())">
						<span class="fa fa-plus"></span> Add view
					</button>
					<button class="btn btn-secondary" onclick="spred.saveSpritemaps()">
						<span class="fa fa-save"></span> Save spritemaps
					</button>
					<button class="btn btn-secondary" onclick="spred.savePalettes()">
						<span class="fa fa-save"></span> Save palettes
					</button>
				</div>
			</div>
			<div class="row flex-grow-1">
				<div class="col col-lg-auto">
					<h4>Controls</h4>
					<h5>Left button</h5>
					<div class="form-check">
						<label for="lmba-drag" class="form-check-label">
							<input type="radio" name="lmb-action" id="lmba-drag" value="drag" checked>
							Drag
						</label>
					</div>
					<div class="form-check">
						<label for="lmba-nothing" class="form-check-label">
							<input type="radio" id="lmba-nothing" name="lmb-action" value="nothing">
							Nothing
						</label>
					</div>
					<div class="form-check disabled">
						<label for="lmba-erase" class="form-check-label">
							<input type="radio" id="lmba-erase" name="lmb-action" value="erase" disabled>
							Erase
						</label>
					</div>
					<div class="form-check disabled">
						<label for="lmba-keycolor" class="form-check-label">
							<input type="radio" id="lmba-keycolor" name="lmb-action" value="keycolor" disabled>
							Key color...
						</label>
					</div>
					<div style="padding-left:calc(1.25rem + 17px)">
						<select id="lmb-color" class="form-control" disabled>
							<option value="#FF88FF">hair lighten(25)</option>
							<option value="#CC00CC">hair</option>
						</select>
					</div>
					<!--<h5>RMB</h5>-->
					<!--<h4>Import</h4>
					<input type="text" id="ClipboardGrabber" placeholder="Ctrl+V image or drop file" class="form-control">
					<div class="form-check disabled">
						<label for="clipboard-add" class="form-check-label">
							<input type="radio" id="clipboard-add" name="clipboard-action" value="add" disabled>
							Add layer
						</label>
					</div>
					<div class="form-check">
						<label for="clipboard-replace" class="form-check-label">
							<input type="radio" id="clipboard-replace" name="clipboard-action" value="replace" checked>
							Replace selected layer
						</label>
					</div>
					<div class="d-flex align-items-baseline">
						<label for="ClipboardMask" class="form-label">Mask&nbsp;color</label>
						<input class="form-control" type="text" id="ClipboardMask" placeholder="hex (e.g. #FFFFFF)">
					</div>-->
				</div>
				<div class="col" id="ViewList">

				</div>
				<div class="col col-lg-auto d-flex flex-column" style="flex-basis:280px;max-height:100%;">
					<h4><button class="ctrl" type="button" onclick="$('#Palettes').toggle()"><span class="fa fa-plus-circle"></span></button> Palette</h4>
					<div id="Palettes">

					</div>
					<h4><button class="ctrl" type="button" onclick="$('#Layers').toggle()"><span class="fa fa-plus-circle"></span></button> Layers</h4>
					<div id="Layers">

						<div id="LayerList" style="overflow-y:scroll;flex-shrink:1">

						</div>
						<div style="flex-shrink:0;flex-grow:0;">
							<h4>Selected:</h4>
							<h5 id="SelLayerName">
							</h5>
							<div>
								<button class="ctrl" type="button" onclick="spred.selPartMove(-1,0)">
									<span class="fa fa-caret-left"></span>
								</button>
								<button class="ctrl" type="button" onclick="spred.selPartMove(1,0)">
									<span class="fa fa-caret-right"></span>
								</button>
								<button class="ctrl" type="button" onclick="spred.selPartMove(0,-1)">
									<span class="fa fa-caret-up"></span>
								</button>
								<button class="ctrl" type="button" onclick="spred.selPartMove(0,1)">
									<span class="fa fa-caret-down"></span>
								</button>
								<!--<button class="ctrl" type="button" onclick="spred.selLayerUp()">
									<span class="fa fa-caret-up"></span>
								</button>
								<button class="ctrl" type="button" onclick="spred.selLayerDown()">
									<span class="fa fa-caret-down"></span>
								</button>-->
							</div>
							<h6 class="text-muted" id="SelLayerPos"></h6>
							<h5>Canvas: </h5>
							<div>
								<em class="text-muted">right-click &amp; copy/save</em>
							</div>
							<div id="SelLayerCanvas"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="tab-monsters" class="tab-pane vstretch">
			<form class="row">
				<div class="col-12">
					<h3>Monster Editor</h3>
				</div>
				<div class="col-lg-3">
					<div>Select monster:</div>
					<div class="list-group" id="monsterList" role="tablist">
						<a class="list-group-item list-group-item-action active" id="list-home-list" href="#">Home</a>
					</div>
				</div>
				<div class="col-lg-9 card px-0" id="monsterEditor">
					<div class="card-header">
						<ul class="nav nav-tabs card-header-tabs">
							<li class="nav-item">
								<a class="nav-link active" data-toggle="tab" href="#monsterBasic">Core</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" data-toggle="tab" href="#monsterBody">Body</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" data-toggle="tab" href="#monsterDesc">Description</a>
							</li>
							<li class="nav-item">
								<a class="nav-link disabled" data-toggle="tab" href="#monsterSpecial">Special moves</a>
							</li>
							<li class="nav-item">
								<a class="nav-link disabled" data-toggle="tab" href="#monsterScripts">Scripts</a>
							</li>
						</ul>
					</div>
					<div class="card-body tab-content">
						<div class="tab-pane active small" id="monsterBasic">
							<div class="row">
								<div class="col-md-6 col-lg-5 col-xl-5">
									<div class="form-group row">
										<label for="monster-id" class="col-4 col-form-label">ID</label>
										<input type="text" id="monster-id" class="col-8 form-control form-control-sm" placeholder="(unique name)" data-mget="m.id">
									</div>
									<div class="form-group row">
										<label for="monster-base" class="col-4 col-form-label">Prototype</label>
										<select id="monster-base" class="col-8 form-control form-control-sm" data-mget="m.base">
											<option value="">(No prototype)</option>
										</select>
									</div>
									<div class="form-group row">
										<label for="monster-name" class="col-4 col-form-label">Name</label>
										<input type="text" id="monster-name" class="col-8 form-control form-control-sm" placeholder="(visible name)" data-mget="m.data.name"/>
									</div>
									<div class="form-group row">
										<div class="col-4">Grammar</div>
										<div class="col-8 form-row">
											<label class="col-4" for="monster-plural">Group</label>
											<div class="col-8">
												<div class="form-check">
													<input class="form-check-input" type="checkbox" id="monster-plural"/>
													<label class="form-check-label" for="monster-plural">(use plural form)</label>
												</div>
											</div>
											<label class="col-4 col-form-label" for="monster-article">Article</label>
											<select id="monster-article" class="col-8 form-control form-control-sm" data-mget="m.data.a">
												<option value="">(none)</option>
												<option value="a">a</option>
												<option value="an">an</option>
												<option value="the">the</option>
											</select>
										</div>
									</div>
								</div>
								<div class="col-md-6 col-lg-5 col-xl-5 offset-xl-1">
									<div class="form-row">
										<div class="form-group col-4">
											<label for="monster-level" class="w-100 text-center">Level</label>
											<input type="text" id="monster-level" class="form-control form-control-sm" data-mget="m.data.level"/>
										</div>
										<div class="w-100"></div>
										<div class="form-group col-2">
											<label class="w-100 text-center" for="monster-str">STR</label>
											<input class="form-control form-control-sm" type="text" id="monster-str" data-mget="m.data.str" data-mset="m.data.str=value"/>
										</div>
										<div class="form-group col-2">
											<label class="w-100 text-center" for="monster-tou">TOU</label>
											<input class="form-control form-control-sm" type="text" id="monster-tou" data-mget="m.data.tou"/>
										</div>
										<div class="form-group col-2">
											<label class="w-100 text-center" for="monster-spe">SPE</label>
											<input class="form-control form-control-sm" type="text" id="monster-spe" data-mget="m.data.spe"/>
										</div>
										<div class="form-group col-2">
											<label class="w-100 text-center" for="monster-int">INT</label>
											<input class="form-control form-control-sm" type="text" id="monster-int" data-mget="m.data.int"/>
										</div>
										<div class="form-group col-2">
											<label class="w-100 text-center" for="monster-wis">WIS</label>
											<input class="form-control form-control-sm" type="text" id="monster-wis" data-mget="m.data.wis"/>
										</div>
										<div class="form-group col-2">
											<label class="w-100 text-center" for="monster-lib">LIB</label>
											<input class="form-control form-control-sm" type="text" id="monster-lib" data-mget="m.data.lib"/>
										</div>
										<div class="form-group col-4">
											<label class="w-100 text-center" for="monster-sen">Sensitivity</label>
											<input class="form-control form-control-sm" type="text" id="monster-sen" data-mget="m.data.sen"/>
										</div>
										<div class="form-group col-4">
											<label class="w-100 text-center" for="monster-cor">Corruption</label>
											<input class="form-control form-control-sm" type="text" id="monster-cor" data-mget="m.data.cor">
										</div>
										<div class="form-group col-4">
											<label class="w-100 text-center" for="monster-bonushp">Bonus HP</label>
											<input class="form-control form-control-sm" type="text" id="monster-bonushp" placeholder="(999)" data-mget="m.data.bonusHP">
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="tab-pane small" id="monsterBody">
							<div class="row">
								<div class="col-md-4 col-sm-6">
									<div class="form-group row">
										<label for="monster-height" class="col-4 col-form-label">Height</label>
										<input type="text" id="monster-height" class="col-8 form-control form-control-sm" data-mget="utils.lengthString(m.body.height)">

										<label for="monster-hips" class="col-4 col-form-label">Hip rating</label>
										<input type="text" id="monster-hips" list="HipRatings" data-mget="m.body.hipRating"
										       class="col-8 form-control form-control-sm">
										<datalist id="HipRatings">
											<option value="Boyish (0)">
											<option value="Slender (2)">
											<option value="Average (4)">
											<option value="Ample (6)">
											<option value="Curvy (10)">
											<option value="Fertile (15)">
											<option value="Inhumanly wide (20)">
										</datalist>

										<label for="monster-butt" class="col-4 col-form-label">Butt rating</label>
										<input type="text" id="monster-butt" list="ButtRatings" data-mget="m.body.buttRating"
										       class="col-8 form-control form-control-sm">
										<datalist id="ButtRatings">
											<option value="Buttless (0)">
											<option value="Tight (2)">
											<option value="Average (4)">
											<option value="Noticeable (6)">
											<option value="Large (8)">
											<option value="Jiggly (10)">
											<option value="Expansive (13)">
											<option value="Huge (16)">
											<option value="Inconceivably big (20)">
										</datalist>

										<label for="monster-beard-style" class="col-4 col-form-label">Beard style</label>
										<select id="monster-beard-style" class="col-8 form-control form-control-sm" data-mget="m.body.beardStyle">
										</select>

										<label for="monster-beard-length" class="col-4 col-form-label">Beard length</label>
										<input type="text" id="monster-beard-length" data-mget="utils.lengthString(m.body.beardLength)"
										       class="col-8 form-control form-control-sm">

										<label for="monster-hair-type" class="col-4 col-form-label">Hair type</label>
										<select id="monster-hair-type" class="col-8 form-control form-control-sm" data-mget="m.body.hairType">
										</select>

										<label for="monster-hair-color" class="col-4 col-form-label">Hair color</label>
										<input type="text" id="monster-hair-color" data-mget="m.body.hairColor"
										       class="col-8 form-control form-control-sm">

										<label for="monster-hair-length" class="col-4 col-form-label">Hair length</label>
										<input type="text" id="monster-hair-length" data-mget="utils.lengthString(m.body.hairLength)"
										       class="col-8 form-control form-control-sm">
									</div>
									<div class="form-group row">
										<label for="monster-skin-base-type" class="col-4 col-form-label">Skin type</label>
										<select id="monster-skin-base-type" data-mget="m.skin.baseType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-skin-base-color" class="col-4 col-form-label">Skin color</label>
										<input type="text" id="monster-skin-base-color" data-mget="m.skin.baseColor"
										       class="col-8 form-control form-control-sm">
										<label for="monster-skin-base-pattern" class="col-4 col-form-label">Skin pattern</label>
										<select id="monster-skin-base-pattern" data-mget="m.skin.basePattern"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-skin-base-color2" class="col-4 col-form-label">Skin color2</label>
										<input type="text" id="monster-skin-base-color2" data-mget="m.skin.baseColor2"
										       class="col-8 form-control form-control-sm">
										<label for="monster-skin-base-adj" class="col-4 col-form-label">Skin adjective</label>
										<input type="text" id="monster-skin-base-adj" data-mget="m.skin.baseAdj"
										       class="col-8 form-control form-control-sm">
										<label for="monster-skin-base-desc" class="col-4 col-form-label">Skin name override</label>
										<input type="text" id="monster-skin-base-desc" data-mget="m.skin.baseDesc"
										       class="col-8 form-control form-control-sm">
										<label for="monster-skin-coverage" class="col-4 col-form-label">Coat coverage</label>
										<select id="monster-skin-coverage" data-mget="m.skin.coverage"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-skin-coat-type" class="col-4 col-form-label">Coat type</label>
										<select id="monster-skin-coat-type" data-mget="m.skin.coatType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-skin-coat-color" class="col-4 col-form-label">Coat color</label>
										<input type="text" id="monster-skin-coat-color" data-mget="m.skin.coatColor"
										       class="col-8 form-control form-control-sm">
										<label for="monster-skin-coat-pattern" class="col-4 col-form-label">Coat pattern</label>
										<select id="monster-skin-coat-pattern" data-mget="m.skin.coatPattern"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-skin-coat-color2" class="col-4 col-form-label">Coat color2</label>
										<input type="text" id="monster-skin-coat-color2" data-mget="m.skin.coatColor2"
										       class="col-8 form-control form-control-sm">
										<label for="monster-skin-coat-adj" class="col-4 col-form-label">Coat adjective</label>
										<input type="text" id="monster-skin-coat-adj" data-mget="m.skin.coatAdj"
										       class="col-8 form-control form-control-sm">
										<label for="monster-skin-coat-desc" class="col-4 col-form-label">Coat name override</label>
										<input type="text" id="monster-skin-coat-desc" data-mget="m.skin.coatDesc"
										       class="col-8 form-control form-control-sm">
									</div>
								</div>
								<div class="col-md-4 col-sm-6">
									<div class="form-group row">
										<label for="monster-antennae-type" class="col-4 col-form-label">Antennae</label>
										<select id="monster-antennae-type" data-mget="m.body.antennaeType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-arms-type" class="col-4 col-form-label">Arms</label>
										<select id="monster-arms-type" data-mget="m.body.armsType"
										         class="col-8 form-control form-control-sm"></select>
										<label for="monster-claws-type" class="col-4 col-form-label">Claws</label>
										<select id="monster-claws-type" data-mget="m.body.clawsType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-claws-tone" class="col-4 col-form-label">Claws tone</label>
										<input type="text" id="monster-claws-tone" data-mget="m.body.clawsTone"
										        class="col-8 form-control form-control-sm">
										<label for="monster-ears-type" class="col-4 col-form-label">Ears</label>
										<select id="monster-ears-type" data-mget="m.body.earsType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-eye-type" class="col-4 col-form-label">Eyes</label>
										<select id="monster-eye-type" data-mget="m.body.eyeType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-eye-color" class="col-4 col-form-label">Eye color</label>
										<input type="text" id="monster-eye-color" data-mget="m.body.eyeColor"
										        class="col-8 form-control form-control-sm">
										<label for="monster-eye-count" class="col-4 col-form-label">Eye count</label>
										<input type="text" id="monster-eye-count" data-mget="m.body.eyeCount"
										       class="col-8 form-control form-control-sm">
										<label for="monster-face-type" class="col-4 col-form-label">Face</label>
										<select id="monster-face-type" data-mget="m.body.faceType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-gills-type" class="col-4 col-form-label">Gills</label>
										<select id="monster-gills-type" data-mget="m.body.gillsType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-horns-type" class="col-4 col-form-label">Horns</label>
										<select id="monster-horns-type" data-mget="m.body.hornsType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-horns-count" class="col-4 col-form-label">Horn count</label>
										<input type="text" id="monster-horns-count" data-mget="m.body.hornsCount"
										        class="col-8 form-control form-control-sm">
										<label for="monster-legs-type" class="col-4 col-form-label">Legs</label>
										<select id="monster-legs-type" data-mget="m.body.legsType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-legs-count" class="col-4 col-form-label">Leg count</label>
										<input type="text" id="monster-legs-count" data-mget="m.body.legsCount"
										        class="col-8 form-control form-control-sm">
										<label for="monster-rearBody-type" class="col-4 col-form-label">Rear body</label>
										<select id="monster-rearBody-type" data-mget="m.body.rearBodyType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-tail-type" class="col-4 col-form-label">Tail</label>
										<select id="monster-tail-type" data-mget="m.body.tailType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-tails-count" class="col-4 col-form-label">Tails count</label>
										<input type="text" id="monster-tails-count" data-mget="m.body.tailsCount"
										        class="col-8 form-control form-control-sm">
										<label for="monster-tongue-type" class="col-4 col-form-label">Tongue</label>
										<select id="monster-tongue-type" data-mget="m.body.tongueType"
										        class="col-8 form-control form-control-sm"></select>
										<label for="monster-wings-type" class="col-4 col-form-label">Wings</label>
										<select id="monster-wings-type" data-mget="m.body.wingsType"
										        class="col-8 form-control form-control-sm"></select>
									</div>
								</div>
								<div class="col-md-4 col-sm-6">
									<div class="form-group row">
										<div class="col-12">TODO ( Ð¶ )</div>
									</div>
									<div class="form-group row">
										<div class="col-12">TODO ( . )( . )</div>
									</div>
									<div class="form-group row">
										<div class="col-12">TODO 8==D</div>
									</div>
									<div class="form-group row">
										<div class="col-12">TODO ( Y )</div>
									</div>
								</div>
							</div>
						</div>
						<div class="tab-pane small" id="monsterDesc">
							<div class="form-group">
								<label for="monster-desc">Description</label>
								<textarea id="monster-desc" class="form-control form-control-sm" rows="20" placeholder="(You're fighting the...)" data-mget="m.data.desc"></textarea>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
</main>
</body>
</html>